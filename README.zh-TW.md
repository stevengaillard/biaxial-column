# RC 柱 3D 交互作用 - 雙向彎矩強度

**[English](./README.md) | [繁體中文](#)**

## 概述

**RC 柱 3D 交互作用** 是一個全面的網頁結構工程應用程式，旨在根據**台灣建築技術規則 (112)** (與 ACI 318 密切一致) 分析和驗證鋼筋混凝土柱在雙向彎矩和軸力下的性能。本工具提供即時視覺回饋，生成 3D 交互作用破壞曲面，以驗證任意斷面的容量比 (D/C)。

## 核心功能

### 計算引擎

* **雙向交互作用**: 3D P-M-M 曲面的應力-應變相容性精確積分
* **任意鋼筋配置**: 支援規則網格或自訂座標鋼筋配置
* **剪力設計**: 自動計算容量 (X 和 Y 方向)
* **P-Delta 效應**: 細長柱的彎矩放大係數
* **耐震規定**: 特殊抗彎構架檢核和圍束要求

### 使用者介面

* **雙語支援**: 即時切換英文和繁體中文
* **即時視覺化**: 3D 交互作用曲面 (Three.js) 和 2D 斷面渲染
* **互動式圖表**: 根據輸入變化即時生成 P-M 曲線
* **雲端同步**: Firebase 驅動的使用者歷史記錄和設計儲存
* **PDF 報告生成**: 透過原生瀏覽器列印生成專業計算報告
* **深色模式**: 低光環境下的高對比度介面

### 進階功能

* **自訂鋼筋匯入**: 從 Excel 批次貼上座標 (`x, y, db`)
* **批次載重處理**: 同時匯入多個載重組合 (`Pu, Mux, Muy`)
* **規範警告**: 即時驗證鋼筋比、間距和箍筋細節
* **載重視覺化**: 相對於容量曲面的 3D 作用載重點繪製

---

## 設計規範符合性

### 台灣建築技術規則 (112) / ACI 318 對應

| 組件 | 說明 | 方法 |
| --- | --- | --- |
| **軸力** | 純壓 | *φP*<sub>n</sub> (強度折減) |
| **撓曲** | 雙向彎矩 | 應變相容 (*ε*<sub>cu</sub> = 0.003) |
| **剪力** | 剪力強度 | *V*<sub>c</sub> + *V*<sub>s</sub> ≤ *φV*<sub>n</sub> |
| **細長度** | 彎矩放大 | 彎矩放大係數 (*δ*) |
| **耐震** | 韌性細節 | 特殊抗彎構架的圍束檢核 |

---

## 計算方法

### 1. 軸力與撓曲強度 (P-M 交互作用)

標稱強度使用**應變相容法**計算，假設斷面上的線性應變分布。

#### 混凝土壓力 (Whitney 應力塊)

**等效矩形應力塊:**

$$\text{應力} = 0.85f'_c$$

$$\text{深度} = \beta_1 c$$

其中 ***β*<sub>1</sub>** 由 ***f'*<sub>c</sub>** 決定:

* 若 ***f'*<sub>c</sub> ≤ 280 kgf/cm²**: 

$$\beta_1 = 0.85$$

* 若 ***f'*<sub>c</sub> > 280 kgf/cm²**: 

$$\beta_1 = \max\left(0.65, 0.85 - 0.05\frac{f'_c - 280}{70}\right)$$

#### 鋼筋應力

鋼筋應力基於應變相容性計算:

$$f_s = \varepsilon_s \times E_s$$

其中:
- ***ε*<sub>s</sub>** = 距中性軸距離處的鋼筋應變
- ***E*<sub>s</sub>** = 2.04 × 10⁶ kgf/cm² (彈性模數)

受降伏約束:

$$-f_y \leq f_s \leq f_y$$

#### 標稱容量

透過將斷面切分為 **30×30 纖維**，並將中性軸旋轉 **72 個角度** (5° 增量) 來進行積分，以確定:

$$P_n = \sum F_c + \sum F_s$$

$$M_{nx} = \sum(F_c \cdot y_i) + \sum(F_s \cdot y_i)$$

$$M_{ny} = \sum(F_c \cdot x_i) + \sum(F_s \cdot x_i)$$

其中:
- ***F*<sub>c</sub>** = 混凝土纖維力
- ***F*<sub>s</sub>** = 鋼筋力
- ***x*<sub>i</sub>, *y*<sub>i</sub>** = 纖維/鋼筋的座標

**檢核:** $P_u \leq \phi P_n$, $M_{ux} \leq \phi M_{nx}$, $M_{uy} \leq \phi M_{ny}$

---

### 2. 強度折減係數 (*φ*)

設計強度為 ***φP*<sub>n</sub>** 和 ***φM*<sub>n</sub>**。係數 ***φ*** 根據極端受拉鋼筋的淨拉應變 (***ε*<sub>t</sub>**) 而變化。

#### 繫筋柱:

| 應變條件 | 淨拉應變 (*ε*<sub>t</sub>) | *φ* 值 |
| --- | --- | --- |
| 壓力控制 | *ε*<sub>t</sub> ≤ *ε*<sub>y</sub> | 0.65 |
| 過渡區 | *ε*<sub>y</sub> < *ε*<sub>t</sub> < 0.005 | 線性內插 |
| 拉力控制 | *ε*<sub>t</sub> ≥ 0.005 | 0.90 |

**過渡區內插:**

$$\phi = 0.65 + 0.25 \times \frac{\varepsilon_t - \varepsilon_y}{0.005 - \varepsilon_y}$$

其中:
- ***ε*<sub>y</sub>** = *f*<sub>y</sub> / *E*<sub>s</sub> (降伏應變)

*注意: 對於純壓檢核，最大軸力限制為 **0.80*φ*<sub>壓力</sub>*P*<sub>o</sub>**。*

**標稱純壓容量:**

$$P_o = 0.85f'_c(A_g - A_{st}) + f_y A_{st}$$

其中:
- ***A*<sub>g</sub>** = 總混凝土面積
- ***A*<sub>st</sub>** = 總鋼筋面積

---

### 3. 剪力強度

#### 混凝土容量 (*V*<sub>c</sub>):

$$V_c = \left[0.53\sqrt{f'_c} + \frac{P_u}{6A_g}\right] \times \frac{b_w \times d}{1000}$$

其中:
- ***b*<sub>w</sub>** = 斷面寬度 (cm)
- ***d*** = 有效深度 (cm)
- ***P*<sub>u</sub>** = 因數軸力 (kgf)
- ***A*<sub>g</sub>** = 總混凝土面積 (cm²)

*(注意: 對於耐震區域，若 *P*<sub>u</sub> < *A*<sub>g</sub>*f'*<sub>c</sub>/20，則 *V*<sub>c</sub> = 0)*

#### 鋼筋容量 (*V*<sub>s</sub>):

$$V_s = \frac{A_v \times f_y \times d}{s \times 1000}$$

受最大限制:

$$V_s \leq \frac{2.12\sqrt{f'_c} \times b_w \times d}{1000}$$

其中:
- ***A*<sub>v</sub>** = 剪力鋼筋面積 = *n*<sub>肢數</sub> × *A*<sub>箍筋</sub> (cm²)
- ***s*** = 箍筋間距 (cm)

#### 設計容量:

$$\phi V_n = \phi(V_c + V_s)$$

其中 ***φ*** = 0.75 (剪力折減係數)

**檢核:** $V_u \leq \phi V_n$

---

### 4. 細長度效應

#### 無支撐長度檢核 (*L*<sub>u</sub>):

細長度根據迴轉半徑檢核:

$$r = 0.3h$$

細長度準則:

$$\frac{kL_u}{r} > 22 \rightarrow \text{柱為細長柱}$$

其中:
- ***k*** = 有效長度係數 (無支撐假設為 1.0)
- ***L*<sub>u</sub>*** = 無支撐長度 (m)
- ***h*** = 斷面深度 (cm)

#### 彎矩放大:

若為細長柱，彎矩需放大:

$$\delta = \frac{1}{1 - \frac{P_u}{0.75P_c}} \geq 1.0$$

$$M_{\text{放大}} = \delta \times M_{\text{原始}}$$

其中 ***P*<sub>c</sub>** (臨界挫屈載重):

$$P_c = \frac{\pi^2 \times 0.4E_c I_g}{(kL_u)^2}$$

其中:
- ***E*<sub>c</sub>** = 15000√*f'*<sub>c</sub> (kgf/cm²)
- ***I*<sub>g</sub>** = 總慣性矩 (cm⁴)

**X 方向 (繞 Y 軸):**

$$I_{gx} = \frac{bh^3}{12}$$

**Y 方向 (繞 X 軸):**

$$I_{gy} = \frac{hb^3}{12}$$

---

## 材料限制與警告

### 混凝土與鋼筋

* **混凝土 (*f'*<sub>c</sub>):** 最小 140 kgf/cm²
* **鋼筋 (*f*<sub>y</sub>):** 最小 2800 kgf/cm²

### 幾何檢核

#### 鋼筋比 (*ρ*):

$$\rho = \frac{A_{st}}{A_g}$$

其中:
- ***A*<sub>st</sub>** = 總鋼筋面積 (cm²)
- ***A*<sub>g</sub>** = 總混凝土面積 (cm²)

**規範限制:**
- **最小值:** *ρ* ≥ 0.01 (1%)
- **最大值:** *ρ* ≤ 0.08 (8%)
- **耐震實務限制:** *ρ* ≤ 0.04 (4%)

#### 箍筋間距:

**非耐震設計:**

$$s_{\max} = \min(16d_b, 48d_{\text{箍筋}}, \text{最小尺寸})$$

其中:
- ***d*<sub>b</sub>** = 主筋直徑 (cm)
- ***d*<sub>箍筋</sub>** = 箍筋直徑 (cm)

**耐震設計:**

$$s_{\max} = \min\left(\frac{d}{4}, 6d_b, 15 \text{ cm}\right)$$

其中 ***d*** = 有效深度 (cm)

#### 耐震圍束 (*A*<sub>sh</sub>):

$$A_{sh} \geq \max\left[0.3\frac{sb_c f'_c}{f_{yt}}\left(\frac{A_g}{A_{ch}} - 1\right), 0.09\frac{sb_c f'_c}{f_{yt}}\right]$$

其中:
- ***s*** = 箍筋間距 (cm)
- ***b*<sub>c</sub>** = 核心尺寸 (cm)
- ***A*<sub>ch</sub>** = 至箍筋外側測量的核心面積 (cm²)
- ***f*<sub>yt</sub>** = 箍筋降伏強度 (kgf/cm²)

---

## 技術堆疊

* **前端:** HTML5, Tailwind CSS, JavaScript (ES6+)
* **視覺化:** Three.js r128 (WebGL 3D), HTML5 Canvas (2D)
* **後端:** Firebase 9.22.0 (驗證 + Firestore)
* **圖示:** Font Awesome 6.4.0
* **數學引擎:** JavaScript 實作的自訂纖維積分求解器

---

## 單位慣例

| 參數 | 單位 | 說明 |
| --- | --- | --- |
| **力 (*P*, *V*)** | tf | 公噸力 (Metric Ton, 1 tf = 1000 kgf) |
| **彎矩 (*M*)** | tf-m | 公噸力-公尺 |
| **長度** | cm / m | 斷面 (cm)、無支撐長度 (m) |
| **應力** | kgf/cm² | 混凝土/鋼筋強度 |
| **面積** | cm² | 斷面積 |

---

## 安全注意事項

⚠️ **重要考量:**

1. **需專業審查**: 所有計算必須由持照專業工程師驗證。
2. **地方規範符合性**: 雖基於台灣規範 112/ACI 318，使用者須確認適用於當地法規。
3. **P-Delta 限制**: 目前實作使用彎矩放大法近似彎矩放大；對於非常細長的結構可能需要二階分析。
4. **剪力方向**: 剪力檢核假設獨立正交作用；未明確考慮雙向剪力交互作用。
5. **單位**: 輸入自訂座標 (cm) 和載重 (tf, tf-m) 時確保一致性。
6. **材料性質**: 驗證實際材料性質符合規範最小要求。

---

## 瀏覽器相容性

* Chrome/Edge (v90+)
* Firefox (v88+)
* Safari (v14+)
* 行動裝置: iOS Safari, Chrome Mobile (3D 視圖啟用觸控控制)

---

## 參考文獻

* **台灣建築技術規則**: 混凝土設計規範 (版本 112)
* **ACI 318-19**: 結構混凝土建築規範要求
* **CRSI 設計手冊**: 交互作用圖與表格

---

## 支援

**電子郵件:** gacchuguts@gmail.com

---

**免責聲明**: 本軟體作為專業工程師的計算輔助工具提供。使用者對輸入資料的準確性和適當性以及結果的解釋承擔全部責任。務必獨立驗證計算結果，並確保符合適用的建築規範和標準。